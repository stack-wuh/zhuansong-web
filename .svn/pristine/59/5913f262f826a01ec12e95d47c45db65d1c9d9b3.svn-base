<!Doctype html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" href="https://www.squrab.com/favicon.ico">
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <title>SquRab-方兔网络</title>
</head>
<style>
    #app {
        text-align: center;
        font-size: 14px;
        position: absolute;
    }

    .head {
        margin: 5% 0;
    }

    .head > img {
        width: 50%;
    }

    .alert {
        width: 75%;
    }

    .copy {
        color: #409EFF
    }

    .bt {
        height: calc(75vh)
    }

    .open-tip {
        position: absolute;
        top: -1%;
        left: -1.5%;;
        z-index: 100;
        width: 100%;
        height: 100%;
        background-image: url(https://res.squrab.com/download/wechat-ua.png);
        background-repeat: no-repeat;
        background-size: 100% 100%;
        -moz-background-size: 100% 100%;
    }
</style>
<body>
<div id="app">
    <div v-show="wxOpen" class="open-tip" @click="wxOpen=false"></div>
    <div class="head">
        <img src="https://res.squrab.com/web/image/logo.png" alt="logo">
        <h3>方兔 - 是速度 更是服务</h3>
    </div>
    <div>
        <el-tabs v-model="activeName" class="tabs" :stretch="true" @tab-click="handleClick">
            <el-tab-pane label="App" name="app">
                <div class="content">
                    <el-tabs tab-position="left" class="bt" type="border-card">
                        <el-tab-pane label="专送">
                            <div>
                                <img src="https://res.squrab.com/download/courier_download.png"
                                     style="width: 50%"
                                     alt="download">
                                <p style="margin-top: 0;color: #409EFF">扫码获取</p>
                                <div>
                                    <h3>【专送员】</h3>
                                    <p style="text-align: left;font-size: 12px;">
                                        “专送员”是一款人人都可注册成为专送员，解决日常中“帮买、帮送、帮取、帮排队”等
                                        问题。</p>
                                    <el-button type="primary" icon="el-icon-download"
                                               @click="downloadDeliveryDriver">
                                        下载安装
                                    </el-button>
                                </div>
                            </div>
                        </el-tab-pane>
                        <el-tab-pane label="速运">
                            <img src="https://res.squrab.com/download/freight_download.png"
                                 style="width: 50%"
                                 alt="download">
                            <p style="margin-top: 0;color: #409EFF">扫码获取</p>
                            <div>
                                <h3>【方兔司机】</h3>
                                <p style="text-align: left;font-size: 12px;">“方兔司机”是为方兔速运打造的司机端app。</p>
                                <el-button type="primary" icon="el-icon-download"
                                           @click="downloadFreightDriver">
                                    下载安装
                                </el-button>
                            </div>
                        </el-tab-pane>
                    </el-tabs>
                </div>
            </el-tab-pane>
            <el-tab-pane label="小程序" name="applet">
                <div class="content">
                    <el-tabs tab-position="left" class="bt" type="border-card">
                        <el-tab-pane label="微信">
                            <el-carousel :interval="interval" indicator-position="outside"
                                         arrow="never" height="calc(60vh)">
                                <el-carousel-item>
                                    <div>
                                        <h3>【方兔速运】</h3>
                                        <img src="https://res.squrab.com/download/freight_applet.jpg"
                                             style="width: 50%"
                                             alt="download">
                                        <p style="text-align: left;font-size: 12px;">
                                            “方兔速运”针对城市物流中，叫车难，价格不规范，服务品质差等问题，通过同城物流标准化运营，服务型体验的全新物流配送模式，极速匹配最合适您的货运司机为您提供专人配送服务。
                                        </p>
                                        <span class="copy" @click="copy('freight_applet')">获取</span>
                                    </div>
                                </el-carousel-item>
                                <el-carousel-item v-if="show">
                                    <div>
                                        <h3>【方兔专送】</h3>
                                        <img src="https://res.squrab.com/download/courier_applet.jpg"
                                             style="width: 50%"
                                             alt="download">
                                        <p style="text-align: left;font-size: 12px;">
                                            “专送”针对城市人群和企业服务，解决日常中“帮买、帮送、帮取、帮排队”等问题。通过劳动共享，众包模式去解决同城快递和跑腿行业的低效和不规范，提供最安全、专业的城市即时配送服务。
                                        </p>
                                        <span class="copy" @click="copy('courier_applet')">获取</span>
                                    </div>
                                </el-carousel-item>
                            </el-carousel>
                        </el-tab-pane>
                        <el-tab-pane label="支付宝">
                            <div style="color: #999">
                                敬请期待
                            </div>
                        </el-tab-pane>
                        <el-tab-pane label="百度">
                            <div style="color: #999">
                                敬请期待
                            </div>
                        </el-tab-pane>
                        <el-tab-pane label="头条">
                            <div style="color: #999">
                                敬请期待
                            </div>
                        </el-tab-pane>
                    </el-tabs>
                </div>
            </el-tab-pane>
        </el-tabs>
    </div>
</div>
</body>
<script src="https://cdn.jsdelivr.net/npm/vue"></script>
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue-resource/1.5.1/vue-resource.min.js"></script>
<script>
    new Vue({
        el: '#app',
        data: {
            activeName: 'app',
            plaform: '',
            info: null,
            list: null,
            height: 0,
            wxOpen: false,
            interval: 3000,
            show: false
        },
        methods: {
            copy(e) {
                switch (e) {
                    case 'freight_applet':
                        this.$message({
                            message: '请长按小程序二维码下载并在微信中识别',
                            center: true,
                        });
                        break;
                    case 'courier_applet':
                        this.$message({
                            message: '请长按小程序二维码下载并在微信中识别',
                            center: true,
                        });
                        break;
                }
            },
            downloadFreightDriver() {
                let ua = window.navigator.userAgent.toLowerCase();
                if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                    this.wxOpen = true;
                } else if (this.info.Mobile && this.info.Version == 'iOS') {
                    let href = '';
                    this.list.app.map((item) => {
                        if (item.app_type === 2)
                            href = item.download_path;
                    });
                    location.href = href;
                } else if (this.info.Mobile && this.info.Version == 'Android') {
                    let href = '';
                    this.list.app.map((item) => {
                        if (item.app_type === 1)
                            href = item.download_path;
                    });
                    location.href = href;
                }
            },
            handleClick() {
                this.show = this.activeName === 'applet';
            },
            downloadDeliveryDriver() {
                let ua = window.navigator.userAgent.toLowerCase();
                if (ua.match(/MicroMessenger/i) == 'micromessenger') {
                    this.wxOpen = true;
                } else if (this.info.Mobile && this.info.Version == 'iOS') {
                    let href = '';
                    this.list.app.map((item) => {
                        if (item.app_type === 7)
                            href = item.download_path;
                    });
                    location.href = href;
                } else if (this.info.Mobile && this.info.Version == 'Android') {
                    let href = '';
                    this.list.app.map((item) => {
                        if (item.app_type === 6)
                            href = item.download_path;
                    });
                    location.href = href;
                }
            }
        },
        mounted() {
            this.$http.get('https://asapi.squrab.com/api/app/url').then((res) => {
                this.info = res.data.data.info;
                this.list = res.data.data.list;
                if (this.info.Mobile === false)
                    location.href = "/";
            }, () => {
                this.$alert('您的网络不稳定,请检查后重试', '网络错误', {
                    confirmButtonText: '重试',
                    type: 'error',
                    center: true,
                    callback: () => {
                        location.reload();
                    }
                });
            });
        },
        created() {
            this.height = document.body.clientHeight * 0.75;
        }
    });
</script>
</html>
