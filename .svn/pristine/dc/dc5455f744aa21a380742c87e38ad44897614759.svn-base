<template>
    <section class='my-download-page'>
        <section class="my-download-page__btn-area">
            <section @click="handleClick" class="my-download-page__btn-area--box">
                <img v-if="isShowBtn" :src="btnImgs[0]" alt="ios">
                <img v-else :src="btnImgs[1]" alt="ios">
            </section>
        </section>
    </section>
</template>

<script> 
 import axios from 'axios'
 const btnImgs = [
     'https://res.squrab.com/web/download/btn_ios.png',
     'https://res.squrab.com/web/download/btn_android.png'
 ]
 export default{
    name: 'MyDownload',
    data(){
        return {
            isShowBtn: 1,
            btnImgs,
            reLoadUrl: ''
        }
    },
    methods: {
        getUserAgent(){
            axios({
                method: 'get',
                url: 'https://asapi.squrab.com/api/app/url'
            }).then(res => {
                let {info, list} = res.data.data
                if(info.Mobile && info.Version.toLocaleLowerCase() == 'ios') {
                    this.isShowBtn = 1
                    this.reLoadUrl = list.app.find(kk => kk.app_type == 7).download_path
                }else if(info.Mobile && info.Version.toLocaleLowerCase() == 'android') {
                    this.isShowBtn = 0
                    this.reLoadUrl = list.app.find(kk => kk.app_type == 6).download_path
                }
            })
        },
        handleClick(){
            window.location.href = this.reLoadUrl
        },
    },
    created(){
        this.getUserAgent()
    },
    mixins: []
 }
</script>

<style scoped lang='scss'>
@import '@/assets/style/mixin.scss';

@include b(download-page) {
    position: relative;
    width: 100%;
    height: 100%;
    background-image: url(../../assets/imgs/mobile/bg_group.png);
    background-size: 100% 100%;
    background-position: center center;

    @include e(btn-area) {
        position: absolute;
        bottom: 12vh;
        width: 80vw;
        left: 10vw;
        overflow: hidden;

        @include m(box) {
            width: 100%;
            height: 100%;

            & > img {
                width: auto;
                max-width: 100%;
            }
        }
    }
}
</style>